From f56414a9556d1a79683f285c25e65412b6d444ad Mon Sep 17 00:00:00 2001
From: ouni666 <fangwenbin@vip.qq.com>
Date: Tue, 23 Sep 2025 17:04:26 +0800
Subject: [PATCH] fix ppc64el build

---
 src/nvtt/squish/simd_ve.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/nvtt/squish/simd_ve.h b/src/nvtt/squish/simd_ve.h
index dbffdec..8bf4e69 100644
--- a/src/nvtt/squish/simd_ve.h
+++ b/src/nvtt/squish/simd_ve.h
@@ -34,7 +34,7 @@
 
 namespace nvsquish {
 
-#define VEC4_CONST( X ) Vec4( vec_splats( (float)X ) )
+#define VEC4_CONST( X ) Vec4( vec_splats( (float){ X } ) )
 
 class Vec4
 {
@@ -106,7 +106,7 @@ public:
 	
 	Vec4& operator*=( Arg v )
 	{
-		m_v = vec_madd( m_v, v.m_v, vec_splats( -0.0f ) );
+		m_v = vec_madd( m_v, v.m_v, vec_splats{ -0.0f } );
 		return *this;
 	}
 	
@@ -122,7 +122,7 @@ public:
 	
 	friend Vec4 operator*( Vec4::Arg left, Vec4::Arg right  )
 	{
-		return Vec4( vec_madd( left.m_v, right.m_v, vec_splats( -0.0f ) ) );
+		return Vec4( vec_madd( left.m_v, right.m_v, vec_splats{ -0.0f } ) );
 	}
 	
 	//! Returns a*b + c
@@ -143,7 +143,7 @@ public:
 		vector float estimate = vec_re( v.m_v );
 		
 		// one round of Newton-Rhaphson refinement
-		vector float diff = vec_nmsub( estimate, v.m_v, vec_splats( 1.0f ) );
+		vector float diff = vec_nmsub( estimate, v.m_v, vec_splats{ 1.0f } );
 		return Vec4( vec_madd( diff, estimate, estimate ) );
 	}
 	
-- 
2.51.0

